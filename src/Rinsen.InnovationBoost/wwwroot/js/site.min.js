!function(){"use strict";angular.module("app",["isteven-multi-select","smart-table"])}(),function(){"use strict";function e(e){var t=this;t.title="DashboardController",t.selected={overview:!0,specific:!1,otherSpecific:!1,reset:function(){this.overview=!1,this.specific=!1,this.otherSpecific=!1}},t.select=function(e){switch(t.selected.reset(),e){case"overview":t.selected.overview=!0;break;case"specific":t.selected.specific=!0;break;case"otherSpecific":t.selected.otherSpecific=!0}}}angular.module("app").controller("DashboardController",e),e.$inject=["$location"]}(),function(){"use strict";function e(t){var c=this;c.apiResources=[],c.selectedApiResource=null,c.selectedTab="General",c.saving=!1,c.create={apiSecretDescription:"",apiSecretExpiration:"",apiSecretType:"",apiSecretValue:"",claimType:"",claimValue:"",propertyKey:"",propertyValue:"",scopeName:"",scopeDisplayName:"",scopeDescription:"",scopeRequired:!1,scopeEmphasize:!1,scopeShowInDiscoveryDocument:!1,apiResourceName:"",apiResourceDisplayName:"",apiResourceDescription:""},c.selectApiResource=function(e){c.selectedApiResource=JSON.parse(JSON.stringify(e))},c.undoChanges=function(){for(var e=0;e<c.apiResources.length;e++)c.apiResources[e].name===c.selectedApiResource.name&&(c.selectedApiResource=c.apiResources[e],toastr.success("Undo comleted"))},c.saveApiResource=function(){c.saving=!0,t.saveApiResource(c.selectedApiResource).then(function(e){200===e.status?t.getApiResource(c.selectedApiResource.name).then(function(e){for(var t=0;t<c.apiResources.length;t++)c.apiResources[t].name===c.selectedApiResource.name&&(c.apiResources[t]=e.data);c.selectApiResource(e.data),toastr.success("Saved"),c.saving=!1}):(c.selectedApiResource=null,toastr.error("Failed"),c.saving=!1)})},c.createNewApiResource=function(){c.saving=!0,t.createApiResource(c.create.apiResourceName,c.create.apiResourceDisplayName,c.create.apiResourceDescription).then(function(e){201===e.status?(c.apiResources.push(e.data),toastr.success("Saved"),c.saving=!1,c.create.apiResourceName="",c.create.apiResourceDisplayName="",c.create.apiResourceDescription=""):(toastr.error("Failed"),c.saving=!1)},function(e){toastr.error("Failed"),c.saving=!1})},c.deleteApiResource=function(i){window.confirm("Delete "+i.displayName)&&t.deleteApiResource(i.name).then(function(e){if(200===e.status){for(var t=0;t<c.apiResources.length;t++)c.apiResources[t].name===i.name&&c.apiResources.splice(t,1);toastr.info("Deleted")}})},c.createNewApiSecret=function(){c.selectedApiResource.apiSecrets.push({description:c.create.apiSecretDescription,expiration:c.create.apiSecretExpiration,type:c.create.apiSecretType,value:c.create.apiSecretValue,state:1}),c.create.apiSecretDescription="",c.create.apiSecretExpiration="",c.create.apiSecretType="",c.create.apiSecretValue=""},c.createNewClaim=function(){c.selectedApiResource.claims.push({type:c.create.claimType,value:c.create.claimValue,state:1}),c.create.claimType="",c.create.claimValue=""},c.createNewScope=function(){c.selectedApiResource.scopes.push({name:c.create.scopeName,displayName:c.create.scopeDisplayName,description:c.create.scopeDescription,emphasize:c.create.scopeEmphasize,required:c.create.scopeRequired,showInDiscoveryDocument:c.create.scopeShowInDiscoveryDocument,state:1}),c.create.scopeName="",c.create.scopeDisplayName="",c.create.scopeDescription="",c.create.scopeRequired=!1,c.create.scopeEmphasize=!1,c.create.scopeShowInDiscoveryDocument=!1},c.createNewProperty=function(){c.selectedApiResource.properties.push({key:c.create.propertyKey,value:c.create.propertyValue,state:1}),c.create.propertyKey="",c.create.propertyValue=""},c.setModified=function(e){0===e.state&&(e.state=2)},c.toggleDelete=function(e){3!==e.state?1!==e.state?4!==e.state?e.state=3:e.state=1:e.state=4:e.state=2},t.getApiResources().then(function(e){c.apiResources.length=0,e.data.forEach(function(e){c.apiResources.push(e)})})}angular.module("app").controller("IdentityServerApiResourceController",e),e.$inject=["IdentityServerApiResourceService"]}(),function(){"use strict";function e(t){var c=this;c.clients=[],c.selectedClient=null,c.selectedTab="General",c.saving=!1,c.create={allowedScope:"",allowedCorsOrigin:"",allowedGrantType:"",claimType:"",claimValue:"",clientSecretType:"SharedSecret",clientSecretDescription:"",clientSecretExpiration:"",identityProviderRestriction:"",postLogoutRedirectUri:"",redirectUri:"",clientId:"",clientName:"",clientDescription:""},c.selectClient=function(e){c.selectedClient=JSON.parse(JSON.stringify(e))},c.undoChanges=function(){for(var e=0;e<c.clients.length;e++)c.clients[e].clientId===c.selectedClient.clientId&&(c.selectedClient=c.clients[e],toastr.success("Undo comleted"))},c.saveClient=function(){c.saving=!0,t.saveClient(c.selectedClient).then(function(e){200===e.status?t.getClient(c.selectedClient.clientId).then(function(e){for(var t=0;t<c.clients.length;t++)c.clients[t].clientId===c.selectedClient.clientId&&(c.clients[t]=e.data);c.selectClient(e.data),toastr.success("Saved"),c.saving=!1}):(c.selectedClient=null,toastr.error("Failed"),c.saving=!1)})},c.createNewClient=function(){c.saving=!0,t.createClient(c.create.clientId,c.create.clientName,c.create.clientDescription).then(function(e){201===e.status?(c.clients.push(e.data),toastr.success("Saved"),c.saving=!1,c.create.clientId="",c.create.clientName="",c.create.clientDescription=""):(toastr.error("Failed"),c.saving=!1)},function(e){toastr.error("Failed"),c.saving=!1})},c.deleteClient=function(i){window.confirm("Delete "+i.clientName)&&t.deleteClient(i.clientId).then(function(e){if(200===e.status){for(var t=0;t<c.clients.length;t++)c.clients[t].clientId===i.clientId&&c.clients.splice(t,1);toastr.info("Deleted")}})},c.createNewAllowedCorsOrigin=function(){c.selectedClient.allowedCorsOrigins.push({origin:c.create.allowedCorsOrigin,state:1}),c.create.allowedCorsOrigin=""},c.createNewAllowedScope=function(){c.selectedClient.allowedScopes.push({scope:c.create.allowedScope,state:1}),c.create.allowedScope=""},c.createNewAllowedGrantType=function(){c.selectedClient.allowedGrantTypes.push({grantType:c.create.allowedGrantType,state:1}),c.create.allowedGrantType=""},c.createNewClaim=function(){c.selectedClient.claims.push({type:c.create.claimType,value:c.create.claimValue,state:1}),c.create.claimType="",c.create.claimValue=""},c.createNewClientSecret=function(){t.getRandomString(40).then(function(e){c.selectedClient.clientSecrets.push({type:c.create.clientSecretType,value:e.data,description:c.create.clientSecretDescription,expiration:c.create.clientSecretExpiration,state:1}),c.create.clientSecretType="SharedSecret",c.create.clientSecretDescription="",c.create.clientSecretExpiration=""})},c.createNewIdentityProviderRestriction=function(){c.selectedClient.identityProviderRestrictions.push({provider:c.create.identityProviderRestriction,state:1}),c.create.identityProviderRestriction=""},c.createNewPostLogoutRedirectUri=function(){c.selectedClient.postLogoutRedirectUris.push({postLogoutRedirectUri:c.create.postLogoutRedirectUri,state:1}),c.create.postLogoutRedirectUri=""},c.createNewRedirectUri=function(){c.selectedClient.redirectUris.push({redirectUri:c.create.redirectUri,state:1}),c.create.redirectUri=""},c.setModified=function(e){0===e.state&&(e.state=2)},c.toggleDelete=function(e){3!==e.state?1!==e.state?4!==e.state?e.state=3:e.state=1:e.state=4:e.state=2},t.getClients().then(function(e){c.clients.length=0,e.data.forEach(function(e){c.clients.push(e)})})}angular.module("app").controller("IdentityServerClientController",e),e.$inject=["IdentityServerClientService"]}(),function(){"use strict";function e(t){var c=this;c.identityResources=[],c.selectedIdentityResource=null,c.selectedTab="General",c.saving=!1,c.create={claimType:"",claimValue:"",propertyKey:"",propertyValue:"",identityResourceName:"",identityResourceDisplayName:"",identityResourceDescription:""},c.selectIdentityResource=function(e){c.selectedIdentityResource=JSON.parse(JSON.stringify(e))},c.undoChanges=function(){for(var e=0;e<c.identityResources.length;e++)c.identityResources[e].name===c.selectedIdentityResource.name&&(c.selectedIdentityResource=c.identityResources[e],toastr.success("Undo comleted"))},c.saveIdentityResource=function(){c.saving=!0,t.saveIdentityResource(c.selectedIdentityResource).then(function(e){200===e.status?t.getIdentityResource(c.selectedIdentityResource.name).then(function(e){for(var t=0;t<c.identityResources.length;t++)c.identityResources[t].name===c.selectedIdentityResource.name&&(c.identityResources[t]=e.data);c.selectIdentityResource(e.data),toastr.success("Saved"),c.saving=!1}):(c.selectedIdentityResource=null,toastr.error("Failed"),c.saving=!1)})},c.createNewIdentityResource=function(){c.saving=!0,t.createIdentityResource(c.create.identityResourceName,c.create.identityResourceDisplayName,c.create.identityResourceDescription).then(function(e){201===e.status?(c.identityResources.push(e.data),toastr.success("Saved"),c.saving=!1,c.create.identityResourceName="",c.create.identityResourceDisplayName="",c.create.identityResourceDescription=""):(toastr.error("Failed"),c.saving=!1)},function(e){toastr.error("Failed"),c.saving=!1})},c.deleteIdentityResource=function(i){window.confirm("Delete "+i.displayName)&&t.deleteIdentityResource(i.name).then(function(e){if(200===e.status){for(var t=0;t<c.identityResources.length;t++)c.identityResources[t].name===i.name&&c.identityResources.splice(t,1);toastr.info("Deleted")}})},c.createNewClaim=function(){c.selectedIdentityResource.claims.push({type:c.create.claimType,value:c.create.claimValue,state:1}),c.create.claimType="",c.create.claimValue=""},c.createNewProperty=function(){c.selectedIdentityResource.properties.push({key:c.create.propertyKey,value:c.create.propertyValue,state:1}),c.create.propertyKey="",c.create.propertyValue=""},c.setModified=function(e){0===e.state&&(e.state=2)},c.toggleDelete=function(e){3!==e.state?1!==e.state?4!==e.state?e.state=3:e.state=1:e.state=4:e.state=2},t.getIdentityResources().then(function(e){c.identityResources.length=0,e.data.forEach(function(e){c.identityResources.push(e)})})}angular.module("app").controller("IdentityServerIdentityResourceController",e),e.$inject=["IdentityServerIdentityResourceService"]}(),function(){"use strict";function e(e,i){var c=this;c.show=function(){c.dataLoading=!0,c.logs.length=0;var t={from:c.options.from,to:c.options.to,logLevels:[],logEnvironments:[],logApplications:[],logSources:[]};c.options.logLevels.forEach(function(e){e.selected&&t.logLevels.push(e.level)}),c.options.logEnvironments.forEach(function(e){e.selected&&t.logEnvironments.push(e.id)}),c.options.logApplications.forEach(function(e){e.selected&&t.logApplications.push(e.id)}),c.options.logSources.forEach(function(e){e.selected&&t.logSources.push(e.id)}),i.getLogs(t).then(function(e){e.data.forEach(function(e){e.expanded=!1,c.logs.push(e)}),c.pages=Math.ceil(c.logs.length/c.itemsByPage),c.dataLoading=!1})},c.dataLoading=!1,c.logs=[],c.itemsByPage=100,c.pages=0,c.options=i.getOptions()}angular.module("app").controller("LoggerController",e),e.$inject=["$location","LogSelectionOptionsService"]}(),function(){"use strict";function e(e){this.title="OtherSpecificController"}angular.module("app").controller("OtherSpecificController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){this.title="OverviewController"}angular.module("app").controller("OverviewController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){this.title="SpecificController"}angular.module("app").controller("SpecificController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){return{link:function(e,t,i){},restrict:"E",scope:{object:"=",icon:"ok"},template:'<td><span style="width: 1px;" class="glyphicon glyphicon-'+scope.icon+'" aria-hidden="true"></span></td>'}}angular.module("app").directive("objectStateDirective",e),e.$inject=["$window"]}(),function(){"use strict";function e(n){return{createApiResource:function(e,t,i){var c={name:e,displayName:t,description:i};return n.post("api/ApiResource/Create",c)},deleteApiResource:function(e){return n.delete("api/ApiResource/"+e)},getApiResources:function(){return n.get("api/ApiResource")},saveApiResource:function(e){return n.post("api/ApiResource/Update",e)},getApiResource:function(e){return n.get("api/ApiResource/"+e)}}}angular.module("app").factory("IdentityServerApiResourceService",e),e.$inject=["$http"]}(),function(){"use strict";function e(n){return{createClient:function(e,t,i){var c={clientId:e,clientName:t,description:i};return n.post("api/Client/Create",c)},deleteClient:function(e){return n.delete("api/Client/"+e)},getClients:function(){return n.get("api/Client")},saveClient:function(e){return n.post("api/Client/Update",e)},getClient:function(e){return n.get("api/Client/"+e)},getRandomString:function(e){return n.get("api/Random/"+e)}}}angular.module("app").factory("IdentityServerClientService",e),e.$inject=["$http"]}(),function(){"use strict";function e(n){return{createIdentityResource:function(e,t,i){var c={name:e,displayName:t,description:i};return n.post("api/IdentityResource/Create",c)},deleteIdentityResource:function(e){return n.delete("api/IdentityResource/"+e)},getIdentityResources:function(){return n.get("api/IdentityResource")},saveIdentityResource:function(e){return n.post("api/IdentityResource/Update",e)},getIdentityResource:function(e){return n.get("api/IdentityResource/"+e)}}}angular.module("app").factory("IdentityServerIdentityResourceService",e),e.$inject=["$http"]}(),function(){"use strict";function e(t){return{getOptions:function(){var e=JSON.parse(document.getElementById("selectionOptions").getAttribute("data-json"));return e.from=new Date(e.from),e.to=new Date(e.to),e},getLogs:function(e){return t.post("Logger/GetLogs",e)}}}angular.module("app").factory("LogSelectionOptionsService",e),e.$inject=["$http"]}();