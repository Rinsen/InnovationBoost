!function(){"use strict";angular.module("app",["isteven-multi-select","smart-table"])}(),function(){"use strict";function e(e){return{link:function(e,t,i){},restrict:"E",scope:{object:"=",icon:"ok"},template:'<td><span style="width: 1px;" class="glyphicon glyphicon-'+scope.icon+'" aria-hidden="true"></span></td>'}}angular.module("app").directive("objectStateDirective",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){var t=this;t.title="DashboardController",t.selected={overview:!0,specific:!1,otherSpecific:!1,reset:function(){this.overview=!1,this.specific=!1,this.otherSpecific=!1}},t.select=function(e){switch(t.selected.reset(),e){case"overview":t.selected.overview=!0;break;case"specific":t.selected.specific=!0;break;case"otherSpecific":t.selected.otherSpecific=!0}}}angular.module("app").controller("DashboardController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e,i){var n=this;n.loading=!0,n.stateChange=!1,n.externalApplications=[],n.name="",n.active=!1,n.activeUntil=new Date,n.createFailed=!1,n.predicate="name",n.reverse=!1,n.mode={create:!1,read:!0,activateCreate:function(){n.mode.create=!0,n.mode.read=!1},activateRead:function(){n.mode.create=!1,n.mode.read=!0}},n.startCreateNew=function(){""===n.activeUntil&&(n.activeUntil=new Date),n.mode.activateCreate()},n.createNew=function(){n.createFailed=!1,n.loading=!0;var e={name:n.name,active:n.active,activeUntil:n.activeUntil};i.create(e).then(function(e){e.data.externalApplications.forEach(function(e){n.externalApplications.unshift(e)}),n.mode.activateRead(),n.createFailed=!1,n.loading=!1,n.name="",n.active=!1,n.activeUntil=new Date},function(){n.loading=!1,n.createFailed=!0})},n.cancelNew=function(){n.mode.activateRead(),n.createFailed=!1},n.order=function(e){n.reverse=n.predicate===e&&!n.reverse,n.predicate=e},n.activate=function(t){n.externalApplications.forEach(function(e){if(e.externalApplicationId===t){if(!0===e.active)return;n.stateChange=!0,e.active=!0,i.update(e).then(function(){n.stateChange=!1},function(){n.stateChange=!1,e.activate=!1,alert("Failed to update active state")})}})},n.deactivate=function(t){n.externalApplications.forEach(function(e){if(e.externalApplicationId===t){if(!1===e.active)return;n.stateChange=!0,e.active=!1,i.update(e).then(function(){n.stateChange=!1},function(){n.stateChange=!1,e.activate=!0,alert("Failed to update active state")})}})},i.getAll().then(function(e){e.data.externalApplications.forEach(function(e){n.externalApplications.push(e)}),n.loading=!1})}angular.module("app").controller("ExternalApplicationsController",e),e.$inject=["$location","ExternalApplicationsService"]}(),function(){"use strict";function e(t){var n=this;function i(){return!angular.equals(n.selectedApiResource,n.apiResources[n.selectedApiResourceIndex])&&!window.confirm("Unsaved changes to "+n.apiResources[n.selectedApiResourceIndex].displayName+" will be lost")}n.apiResources=[],n.selectedApiResource=null,n.selectedApiResourceIndex=null,n.selectedTab="General",n.saving=!1,n.create={apiSecretDescription:"",apiSecretExpiration:"",apiSecretType:"",apiSecretValue:"",claimType:"",claimValue:"",propertyKey:"",propertyValue:"",scopeName:"",scopeDisplayName:"",scopeDescription:"",scopeRequired:!1,scopeEmphasize:!1,scopeShowInDiscoveryDocument:!1,apiResourceName:"",apiResourceDisplayName:"",apiResourceDescription:""},n.selectApiResource=function(e){for(var t=0;t<n.apiResources.length;t++)e.id===n.apiResources[t].id&&(n.selectedApiResourceIndex=t);n.selectedApiResource=JSON.parse(JSON.stringify(e))},n.undoChanges=function(){n.selectedApiResource=n.apiResources[n.selectedApiResourceIndex],toastr.success("Undo comleted")},n.selectPreviousApiResource=function(){if(!i()&&0<n.selectedApiResourceIndex){n.selectedApiResourceIndex--;var e=n.apiResources[n.selectedApiResourceIndex];n.selectApiResource(e)}},n.selectNextApiResource=function(){if(!i()&&n.selectedApiResourceIndex<n.apiResources.length-1){n.selectedApiResourceIndex++;var e=n.apiResources[n.selectedApiResourceIndex];n.selectApiResource(e)}},n.closeEdit=function(){i()||(n.selectedApiResource=null)},n.saveApiResource=function(){n.saving=!0,t.saveApiResource(n.selectedApiResource).then(function(e){200===e.status?t.getApiResource(n.selectedApiResource.name).then(function(e){for(var t=0;t<n.apiResources.length;t++)n.apiResources[t].name===n.selectedApiResource.name&&(n.apiResources[t]=e.data);n.selectApiResource(e.data),toastr.success("Saved"),n.saving=!1}):(n.selectedApiResource=null,toastr.error("Failed"),n.saving=!1)})},n.createNewApiResource=function(){n.saving=!0,t.createApiResource(n.create.apiResourceName,n.create.apiResourceDisplayName,n.create.apiResourceDescription).then(function(e){201===e.status?(n.apiResources.push(e.data),toastr.success("Saved"),n.saving=!1,n.create.apiResourceName="",n.create.apiResourceDisplayName="",n.create.apiResourceDescription=""):(toastr.error("Failed"),n.saving=!1)},function(e){toastr.error("Failed"),n.saving=!1})},n.deleteApiResource=function(i){window.confirm("Delete "+i.displayName)&&t.deleteApiResource(i.name).then(function(e){if(200===e.status){for(var t=0;t<n.apiResources.length;t++)n.apiResources[t].name===i.name&&n.apiResources.splice(t,1);toastr.info("Deleted")}})},n.createNewApiSecret=function(){n.selectedApiResource.apiSecrets.push({description:n.create.apiSecretDescription,expiration:n.create.apiSecretExpiration,type:n.create.apiSecretType,value:n.create.apiSecretValue,state:1}),n.create.apiSecretDescription="",n.create.apiSecretExpiration="",n.create.apiSecretType="",n.create.apiSecretValue=""},n.createNewClaim=function(){n.selectedApiResource.claims.push({type:n.create.claimType,value:n.create.claimValue,state:1}),n.create.claimType="",n.create.claimValue=""},n.createNewScope=function(){n.selectedApiResource.scopes.push({name:n.create.scopeName,displayName:n.create.scopeDisplayName,description:n.create.scopeDescription,emphasize:n.create.scopeEmphasize,required:n.create.scopeRequired,showInDiscoveryDocument:n.create.scopeShowInDiscoveryDocument,state:1}),n.create.scopeName="",n.create.scopeDisplayName="",n.create.scopeDescription="",n.create.scopeRequired=!1,n.create.scopeEmphasize=!1,n.create.scopeShowInDiscoveryDocument=!1},n.createNewProperty=function(){n.selectedApiResource.properties.push({key:n.create.propertyKey,value:n.create.propertyValue,state:1}),n.create.propertyKey="",n.create.propertyValue=""},n.setModified=function(e){0===e.state&&(e.state=2)},n.toggleDelete=function(e){3!==e.state?1!==e.state?4!==e.state?e.state=3:e.state=1:e.state=4:e.state=2},t.getApiResources().then(function(e){n.apiResources.length=0,e.data.forEach(function(e){n.apiResources.push(e)})})}angular.module("app").controller("IdentityServerApiResourceController",e),e.$inject=["IdentityServerApiResourceService"]}(),function(){"use strict";function e(t,e,i){var n=this;function c(e){if(201===e.status){var t=e.data;a(t),toastr.success("Saved"),n.saving=!1,n.create.clientId="",n.create.clientName="",n.create.clientDescription="",n.create.active=!1,n.selectClient(t)}else toastr.error("Failed"),n.saving=!1}function r(){return!angular.equals(n.selectedClient,n.clients[n.selectedClientIndex])&&!window.confirm("Unsaved changes to "+n.clients[n.selectedClientIndex].clientName+" will be lost")}function a(t,e){if(t.clientTypeName="",void 0!==t.clientTypeId&&n.types.forEach(function(e){e.id===t.clientTypeId&&(t.clientTypeName=e.name)}),void 0!==e&&!1!==e)for(var i=0;i<n.clients.length;i++)n.clients[i].clientId===n.selectedClient.clientId&&(n.clients[i]=response.data);else n.clients.push(t)}n.clients=[],n.types=[],n.selectedClient=null,n.selectedClientIndex=null,n.selectedTab="General",n.saving=!1,n.create={active:!1,allowedCorsOrigin:"",allowedGrantType:"",claimType:"",claimValue:"",clientSecretType:"SharedSecret",clientSecretDescription:"",clientSecretExpiration:"",identityProviderRestriction:"",postLogoutRedirectUri:"",redirectUri:"",clientId:"",clientName:"",clientDescription:""},n.selectClient=function(e){for(var t=0;t<n.clients.length;t++)e.id===n.clients[t].id&&(n.selectedClientIndex=t);n.selectedClient=JSON.parse(JSON.stringify(e))},n.selectPreviousClient=function(){if(!r()&&0<n.selectedClientIndex){n.selectedClientIndex--;var e=n.clients[n.selectedClientIndex];n.selectClient(e)}},n.selectNextClient=function(){if(!r()&&n.selectedClientIndex<n.clients.length-1){n.selectedClientIndex++;var e=n.clients[n.selectedClientIndex];n.selectClient(e)}},n.closeEdit=function(){r()||(n.selectedClient=null)},n.undoChanges=function(){n.selectedClient=n.clients[n.selectedClientIndex],toastr.success("Undo comleted")},n.saveClient=function(){n.saving=!0,n.apiResources.forEach(function(e){e.scopes.forEach(function(t){t.selected&&"notSelected"===t.previousState?n.selectedClient.allowedScopes.push({scope:t.name,state:1}):t.selected||0!==t.previousState||n.selectedClient.allowedScopes.forEach(function(e){t.name===e.scope&&(e.state=3)})})}),n.identityResources.forEach(function(t){t.selected&&"notSelected"===t.previousState?n.selectedClient.allowedScopes.push({scope:t.name,state:1}):t.selected||0!==t.previousState||n.selectedClient.allowedScopes.forEach(function(e){t.name===e.scope&&(e.state=3)})}),t.saveClient(n.selectedClient).then(function(e){200===e.status?t.getClient(n.selectedClient.clientId).then(function(e){a(e.data,!0),n.selectClient(e.data),toastr.success("Saved"),n.saving=!1}):(n.selectedClient=null,toastr.error("Failed"),n.saving=!1)})},n.createNewNodeClient=function(){n.saving=!0,t.createNodeClient(n.create.clientName,n.create.clientDescription).then(c,function(e){toastr.error("Failed"),n.saving=!1})},n.createNewWebsiteClient=function(){n.saving=!0,t.createWebsiteClient(n.create.clientName,n.create.clientDescription).then(c,function(e){toastr.error("Failed"),n.saving=!1})},n.deleteClient=function(i){window.confirm("Delete "+i.clientName)&&t.deleteClient(i.clientId).then(function(e){if(200===e.status){for(var t=0;t<n.clients.length;t++)n.clients[t].clientId===i.clientId&&n.clients.splice(t,1);toastr.info("Deleted")}})},n.createNewAllowedCorsOrigin=function(){n.selectedClient.allowedCorsOrigins.push({origin:n.create.allowedCorsOrigin,state:1}),n.create.allowedCorsOrigin=""},n.createNewAllowedScope=function(){n.selectedClient.allowedScopes.push({scope:n.create.allowedScope,state:1}),n.create.allowedScope=""},n.createNewAllowedGrantType=function(){n.selectedClient.allowedGrantTypes.push({grantType:n.create.allowedGrantType,state:1}),n.create.allowedGrantType=""},n.createNewClaim=function(){n.selectedClient.claims.push({type:n.create.claimType,value:n.create.claimValue,state:1}),n.create.claimType="",n.create.claimValue=""},n.createNewClientSecret=function(){t.getRandomString(40).then(function(e){n.selectedClient.clientSecrets.push({type:n.create.clientSecretType,value:e.data,description:n.create.clientSecretDescription,expiration:n.create.clientSecretExpiration,state:1}),n.create.clientSecretType="SharedSecret",n.create.clientSecretDescription="",n.create.clientSecretExpiration=""})},n.createNewIdentityProviderRestriction=function(){n.selectedClient.identityProviderRestrictions.push({provider:n.create.identityProviderRestriction,state:1}),n.create.identityProviderRestriction=""},n.createNewPostLogoutRedirectUri=function(){n.selectedClient.postLogoutRedirectUris.push({postLogoutRedirectUri:n.create.postLogoutRedirectUri,state:1}),n.create.postLogoutRedirectUri=""},n.createNewRedirectUri=function(){n.selectedClient.redirectUris.push({redirectUri:n.create.redirectUri,state:1}),n.create.redirectUri=""},n.setModified=function(e){0===e.state&&(e.state=2)},n.toggleDelete=function(e){3!==e.state?1!==e.state?4!==e.state?e.state=3:e.state=1:e.state=4:e.state=2},t.getClientTypes().then(function(e){e.data.forEach(function(e){n.types.push(e)}),t.getClients().then(function(e){n.clients.length=0,e.data.forEach(function(e){a(e)})})})}angular.module("app").controller("IdentityServerClientController",e),e.$inject=["IdentityServerClientService","IdentityServerApiResourceService","IdentityServerIdentityResourceService"]}(),function(){"use strict";function e(e,t){var i=this;i.title="IdentityServerController",i.clients=[],i.selectedClient=null,i.selectedTab="General",i.create={allowedScope:"",allowedCorsOrigin:"",allowedGrantType:"",claimType:"",claimValue:"",clientSecretType:"",clientSecretValue:"",clientSecretDescription:"",clientSecretExpiration:"",identityProviderRestriction:"",postLogoutRedirectUri:"",redirectUri:""},i.selectClient=function(e){i.selectedClient=JSON.parse(JSON.stringify(e))},i.undoChanges=function(){for(var e=0;e<i.clients.length;e++)i.clients[e].clientId===i.selectedClient.clientId&&(i.selectedClient=i.clients[e])},i.saveClient=function(){t.saveClient(i.selectedClient).then(t.getClient(i.selectedClient.clientId).then(function(e){for(var t=0;t<i.clients.length;t++)i.clients[t].clientId===i.selectedClient.clientId&&(i.clients[t]=e.data);i.selectClient(e.data)}))},i.createNewAllowedCorsOrigin=function(){i.selectedClient.allowedCorsOrigins.push({origin:i.create.allowedCorsOrigin,state:1}),i.create.allowedCorsOrigin=""},i.createNewAllowedScope=function(){i.selectedClient.allowedScopes.push({scope:i.create.allowedScope,state:1}),i.create.allowedScope=""},i.createNewAllowedGrantType=function(){i.selectedClient.allowedGrantTypes.push({grantType:i.create.allowedGrantType,state:1}),i.create.allowedGrantType=""},i.createNewClaim=function(){i.selectedClient.claims.push({type:i.create.claimType,value:i.create.claimValue,state:1}),i.create.claimType="",i.create.claimValue=""},i.createNewClientSecret=function(){i.selectedClient.clientSecrets.push({type:i.create.clientSecretType,value:i.create.clientSecretValue,description:i.create.clientSecretDescription,expiration:i.create.clientSecretExpiration,state:1}),i.create.clientSecretType="",i.create.clientSecretValue="",i.create.clientSecretDescription="",i.create.clientSecretExpiration=""},i.createNewIdentityProviderRestriction=function(){i.selectedClient.identityProviderRestrictions.push({provider:i.create.identityProviderRestriction,state:1}),i.create.identityProviderRestriction=""},i.createNewPostLogoutRedirectUri=function(){i.selectedClient.postLogoutRedirectUris.push({postLogoutRedirectUri:i.create.postLogoutRedirectUri,state:1}),i.create.postLogoutRedirectUri=""},i.createNewRedirectUri=function(){i.selectedClient.redirectUris.push({redirectUri:i.create.redirectUri,state:1}),i.create.redirectUri=""},i.setModified=function(e){0===e.state&&(e.state=2)},i.toggleDelete=function(e){3!==e.state?1!==e.state?4!==e.state?e.state=3:e.state=1:e.state=4:e.state=2},t.getClients().then(function(e){i.clients.length=0,e.data.forEach(function(e){i.clients.push(e)})})}angular.module("app").controller("IdentityServerController",e),e.$inject=["$location","IdentityServerClientService"]}(),function(){"use strict";function e(t){var n=this;function i(){return!angular.equals(n.selectedIdentityResource,n.identityResources[n.selectedIdentityResourceIndex])&&!window.confirm("Unsaved changes to "+n.identityResources[n.selectedIdentityResourceIndex].displayName+" will be lost")}n.identityResources=[],n.selectedIdentityResource=null,n.selectedIdentityResourceIndex=null,n.selectedTab="General",n.saving=!1,n.create={claimType:"",claimValue:"",propertyKey:"",propertyValue:"",identityResourceName:"",identityResourceDisplayName:"",identityResourceDescription:""},n.selectIdentityResource=function(e){for(var t=0;t<n.identityResources.length;t++)e.id===n.identityResources[t].id&&(n.selectedIdentityResourceIndex=t);n.selectedIdentityResource=JSON.parse(JSON.stringify(e))},n.undoChanges=function(){n.selectedIdentityResource=n.identityResources[n.selectedIdentityResourceIndex],toastr.success("Undo comleted")},n.selectPreviousIdentityResource=function(){if(!i()&&0<n.selectedIdentityResourceIndex){n.selectedIdentityResourceIndex--;var e=n.identityResources[n.selectedIdentityResourceIndex];n.selectIdentityResource(e)}},n.selectNextIdentityResource=function(){if(!i()&&n.selectedIdentityResourceIndex<n.identityResources.length-1){n.selectedIdentityResourceIndex++;var e=n.identityResources[n.selectedIdentityResourceIndex];n.selectIdentityResource(e)}},n.closeEdit=function(){i()||(n.selectedIdentityResource=null)},n.saveIdentityResource=function(){n.saving=!0,t.saveIdentityResource(n.selectedIdentityResource).then(function(e){200===e.status?t.getIdentityResource(n.selectedIdentityResource.name).then(function(e){for(var t=0;t<n.identityResources.length;t++)n.identityResources[t].name===n.selectedIdentityResource.name&&(n.identityResources[t]=e.data);n.selectIdentityResource(e.data),toastr.success("Saved"),n.saving=!1}):(n.selectedIdentityResource=null,toastr.error("Failed"),n.saving=!1)})},n.createNewIdentityResource=function(){n.saving=!0,t.createIdentityResource(n.create.identityResourceName,n.create.identityResourceDisplayName,n.create.identityResourceDescription).then(function(e){201===e.status?(n.identityResources.push(e.data),toastr.success("Saved"),n.saving=!1,n.create.identityResourceName="",n.create.identityResourceDisplayName="",n.create.identityResourceDescription=""):(toastr.error("Failed"),n.saving=!1)},function(e){toastr.error("Failed"),n.saving=!1})},n.deleteIdentityResource=function(i){window.confirm("Delete "+i.displayName)&&t.deleteIdentityResource(i.name).then(function(e){if(200===e.status){for(var t=0;t<n.identityResources.length;t++)n.identityResources[t].name===i.name&&n.identityResources.splice(t,1);toastr.info("Deleted")}})},n.createNewClaim=function(){n.selectedIdentityResource.claims.push({type:n.create.claimType,value:n.create.claimValue,state:1}),n.create.claimType="",n.create.claimValue=""},n.createNewProperty=function(){n.selectedIdentityResource.properties.push({key:n.create.propertyKey,value:n.create.propertyValue,state:1}),n.create.propertyKey="",n.create.propertyValue=""},n.setModified=function(e){0===e.state&&(e.state=2)},n.toggleDelete=function(e){3!==e.state?1!==e.state?4!==e.state?e.state=3:e.state=1:e.state=4:e.state=2},t.getIdentityResources().then(function(e){n.identityResources.length=0,e.data.forEach(function(e){n.identityResources.push(e)})})}angular.module("app").controller("IdentityServerIdentityResourceController",e),e.$inject=["IdentityServerIdentityResourceService"]}(),function(){"use strict";function e(e,i){var n=this;n.show=function(){n.dataLoading=!0,n.logs.length=0;var t={from:n.options.from,to:n.options.to,logLevels:[],logEnvironments:[],logApplications:[],logSources:[]};n.options.logLevels.forEach(function(e){e.selected&&t.logLevels.push(e.level)}),n.options.logEnvironments.forEach(function(e){e.selected&&t.logEnvironments.push(e.id)}),n.options.logApplications.forEach(function(e){e.selected&&t.logApplications.push(e.id)}),n.options.logSources.forEach(function(e){e.selected&&t.logSources.push(e.id)}),i.getLogs(t).then(function(e){e.data.forEach(function(e){e.expanded=!1,n.logs.push(e)}),n.pages=Math.ceil(n.logs.length/n.itemsByPage),n.dataLoading=!1})},n.dataLoading=!1,n.logs=[],n.itemsByPage=100,n.pages=0,n.options=i.getOptions()}angular.module("app").controller("LoggerController",e),e.$inject=["$location","LogSelectionOptionsService"]}(),function(){"use strict";function e(e){this.title="OtherSpecificController"}angular.module("app").controller("OtherSpecificController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){this.title="OverviewController"}angular.module("app").controller("OverviewController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){this.title="SpecificController"}angular.module("app").controller("SpecificController",e),e.$inject=["$location"]}(),function(){"use strict";function e(t){return{getAll:function(){return t.get("/ExternalApplications/GetAll")},create:function(e){return t.post("/ExternalApplications/Create",e)},update:function(e){return t.post("/ExternalApplications/Update",e)}}}angular.module("app").factory("ExternalApplicationsService",e),e.$inject=["$http"]}(),function(){"use strict";function e(c){return{createApiResource:function(e,t,i){var n={name:e,displayName:t,description:i};return c.post("api/ApiResource/Create",n)},deleteApiResource:function(e){return c.delete("api/ApiResource/"+e)},getApiResources:function(){return c.get("api/ApiResource")},saveApiResource:function(e){return c.post("api/ApiResource/Update",e)},getApiResource:function(e){return c.get("api/ApiResource/"+e)}}}angular.module("app").factory("IdentityServerApiResourceService",e),e.$inject=["$http"]}(),function(){"use strict";function e(c){return{createClient:function(e,t,i){var n={clientId:e,clientName:t,description:i};return c.post("api/Client/Create",n)},createNodeClient:function(e,t){var i={clientName:e,description:t};return c.post("api/Client/CreateNode",i)},createWebsiteClient:function(e,t){var i={clientName:e,description:t};return c.post("api/Client/CreateWebsite",i)},deleteClient:function(e){return c.delete("api/Client/"+e)},getClients:function(){return c.get("api/Client")},getClientTypes:function(){return c.get("api/Client/Type")},saveClient:function(e){return c.post("api/Client/Update",e)},getClient:function(e){return c.get("api/Client/"+e)},getRandomString:function(e){return c.get("api/Random/"+e)}}}angular.module("app").factory("IdentityServerClientService",e),e.$inject=["$http"]}(),function(){"use strict";function e(c){return{createIdentityResource:function(e,t,i){var n={name:e,displayName:t,description:i};return c.post("api/IdentityResource/Create",n)},deleteIdentityResource:function(e){return c.delete("api/IdentityResource/"+e)},getIdentityResources:function(){return c.get("api/IdentityResource")},saveIdentityResource:function(e){return c.post("api/IdentityResource/Update",e)},getIdentityResource:function(e){return c.get("api/IdentityResource/"+e)}}}angular.module("app").factory("IdentityServerIdentityResourceService",e),e.$inject=["$http"]}(),function(){"use strict";function e(t){return{getOptions:function(){var e=JSON.parse(document.getElementById("selectionOptions").getAttribute("data-json"));return e.from=new Date(e.from),e.to=new Date(e.to),e},getLogs:function(e){return t.post("Logger/GetLogs",e)}}}angular.module("app").factory("LogSelectionOptionsService",e),e.$inject=["$http"]}();